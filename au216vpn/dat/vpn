#!/bin/bash
#Verify-certificate:
#AkdiicHhebbcllaokcnhwbbqhxj
TOA="\e[0m" # No color
wbold="\e[1;37m" # White-bold
wcol="\e[0;37m" # White
rbold="\e[1;31m" # Red-bold
gbold="\e[1;32m" # Green-bold
ybold="\e[1;33m" # Yellow-bold
err_count=0
cat_vpn="$(cat /opt/au216vpn/dat/vpn)"
pvpns="/opt/au216vpn/servers/protonvpn/"
vpnbs="/opt/au216vpn/servers/vpnbook/"
function protonvpn_login() {
	echo
	echo Username: protonvpn-anonu216
	echo Password: protonvpn-anonu216
	echo
}
vpnbook_password="${rbold}[MUST BE ENTERED VIA 99.4]${TOA}"
function vpnbook_login() {
	echo
	echo Username: vpnbook
	echo -e "Password: $vpnbook_password (See Additional Option 99.4 for updates)"
	echo
}
location=""
function redir_loca() {
	if [ $location = "add_options" ]
	then
		clear
		add_options
		testing
	else
		serv_select
		testing
	fi
}
wtrmrk="\e[1;36m" # Cyan-bold (WaTeRMaRK color)
cd "$( dirname $( dirname "$0" ) )"
chmod +x dat/chk_dep
dat/chk_dep
clear
echo -e "${wcol}Welcome! Loading..."
sleep 2
clear
echo
echo -e "${wtrmrk}######################################################################"
echo "######################################################################"
echo "##          _    _ ___  __   __  _  _____   __      _______  _   _  ##"
echo "##     /\  | |  | |__ \/_ | / / ( )/ ____|  \ \    / /  __ \| \ | | ##"
echo "##    /  \ | |  | |  ) || |/ /_ |/| (___     \ \  / /| |__) |  \| | ##"
echo "##   / /\ \| |  | | / / | | '_ \   \___ \     \ \/ / |  ___/| . \` | ##"
echo "##  / ____ \ |__| |/ /_ | | (_) |  ____) |     \  /  | |    | |\  | ##"
echo "## /_/    \_\____/|____||_|\___/  |_____/       \/   |_|    |_| \_| ##"
echo "##                                                                  ##"
echo "######################################################################"
echo "### Anonymous User 216's Virtual Private Network Collection - v1.0 ###"
echo "######################################################################"
echo 
echo -n -e "${wcol}Press ENTER to continue..." && read null_input
echo




function serv_select() { # Server select menu
location="serv_select"
uses=(11 12 21 22 23 24 31 32 41 42 51 61 71)
for x in ${uses[*]}; do
	usescount=$(cat 'uses/'$x)
	if [ $usescount -lt 21 ]
	then
		declare "s${x}=\e[1;32m$usescount$wcol"
	elif [ $usescount -lt 41 ]
	then
		declare "s${x}=\e[1;33m$usescount$wcol"
	else
		declare "s${x}=\e[1;31m$usescount$wcol"
	fi
done
clear
echo -e "${wtrmrk}These are the available servers:"
echo 
echo -e "${wbold}(1) Tokyo, Japan${wcol}"
echo -e "	(1.1) Server #1 -$s11-"
echo -e "	(1.2) Server #2 -$s12-"
echo -e "${wbold}(2) Virginia, United States${wcol}"
echo -e "	(2.1) Server #1 -$s21-"
echo -e "	(2.2) Server #2 -$s22-"
echo -e "	(2.3) Server #3 -$s23-"
echo -e "	(2.4) Server #4 -$s24-"
echo -e "${wbold}(3) Amsterdam, Netherlands${wcol}"
echo -e "	(3.1) Server #1 -$s31-"
echo -e "	(3.2) Server #2 -$s32-"
echo -e "${wbold}(4) Bucharest, Romania${wcol}"
echo -e "	(4.1) Server #1 -$s41-"
echo -e "	(4.2) Server #2 -$s42-"
echo -e "${wbold}(5) Montreal, Canada${wcol}"
echo -e "	(5.1) Server #1 -$s51-"
echo -e "${wbold}(6) Frankfurt, Germany${wcol}"
echo -e "	(6.1) Server #1 -$s61-"
echo -e "${wbold}(7) Roubaix, France${wcol}"
echo -e "	(7.1) Server #1 -$s71-"
echo
echo -e "${wbold}(99) Additional Options${wcol}"
echo -e "	(99.1) Reset all usage values"
echo -e "	(99.2) Edit one usage value"
echo -e "	(99.3) Disconnect an existing connection"
echo -e "	(99.4) Update the VPNBook password"
echo -e "	(99.5) View dependency message at start"
echo -e "	(99.6) Exit the program"
echo
echo "Please choose an option."
echo -n "> " && read serv_pick
}
serv_select




function testing() { # Testing value options
if [ $serv_pick = "99" ] && [ $location != "add_options" ]
then
	function add_options() { # Additional options menu
	location="add_options"
	echo
	echo -e "${wbold}Additional Options:${wcol}"
	echo "(99.1) Reset all usage values"
	echo "(99.2) Edit one usage value"
	echo "(99.3) Disconnect an existing connection"
	echo "(99.4) Update the VPNBook password"
	echo "(99.5) View dependency message at start"
	echo "(99.6) Exit the program"
	echo "(99.7) Back to the previous menu"
	echo
	echo -n "> " && read serv_pick
	}
	add_options
fi
case $serv_pick in
	"99.1") 
	for x in ${uses[*]}; do
	echo 0 > "uses/"$x
	done
	sleep 1
	echo
	echo "Done."
	sleep 1
	redir_loca
	;;
	"99.2")
	function serv_edit() {
	echo
	echo "Server number?"
	echo -n "> " && read serv_del
	case $serv_del in
		"1.1"|"1.2"|"2.1"|"2.2"|"2.3"|"2.4"|"3.1"|"3.2"|"4.1"|"4.2"|"5.1"|"6.1"|"7.1")
		echo
		echo "Are you adding, subtracting, or clearing the value of Server $serv_del? (A/S/C)"
		serv_del="${serv_del:0:1}${serv_del:2:2}"
		echo -n "> " && read serv_delop
		case $serv_delop in
			"a"|"A")
			echo
			echo "By how much?"
			read -p "> " serv_del_amount
			echo $(($(cat "uses/$serv_del")+$serv_del_amount)) > uses/$serv_del
			sleep 1
			echo
			echo "Done."
			sleep 1
			redir_loca
			;;
			"s"|"S")
			echo
			echo "By how much?"
			read -p "> " serv_del_amount
			echo $(($(cat "uses/$serv_del")-$serv_del_amount)) > uses/$serv_del
			sleep 1
			echo
			echo "Done."
			sleep 1
			redir_loca
			;;
			"c"|"C")
			echo 0 > uses/$serv_del
			sleep 1
			echo
			echo "Done."
			sleep 1
			redir_loca
			;;
		esac
		;;
		*)
		echo
		echo -e "${rbold}The server you selected was not found. Please try again.$wcol"
		serv_edit
		;;
	esac
	}
	serv_edit
	;;
	"99.3")
	killall openvpn &> /dev/null
	sleep 1
	echo
	echo Done.
	sleep 1
	redir_loca
	;;
	"99.4")
	echo
	echo "Instructions for updating the VPNBook password:"
	echo "1. Go to www.vpnbook.com"
	echo "2. Click the OpenVPN tab"
	echo "3. Enter the password shown on-screen below:"
	echo -n "> " && read vpnbook_pass
	replace "vpnbook_password=$vpnbook_password" "vpnbook_password=$vpnbook_pass" -- "$0" &> /dev/null
	sleep 1
	echo
	echo "Done."
	sleep 1
	redir_loca
	;;
	"99.5")
	echo
	echo 'Do you wish to see the dependency message at start? (Y/N)'
	echo -n "> " && read dep_msg
	case $dep_msg in
		"y"|"Y")
		echo "req-ver-msg: 1" > /opt/au216vpn/dat/dep_msg
		echo
		echo "Done."
		sleep 1
		redir_loca
		;;
		"n"|"N")
		echo "req-ver-msg: 0" > /opt/au216vpn/dat/dep_msg
		echo
		echo "Done."
		sleep 1
		redir_loca
		;;
		*)
		echo foo &> /dev/null
		echo
		echo "Doing nothing..."
		sleep 1.5
		redir_loca
		;;
	esac
	;;
	"99.6")
	echo
	exit
	;;
	"99.7")
	clear
	serv_select
	testing
	;;
	"1.1"|"1")
	echo $(($(cat "uses/11")+1)) > uses/11
	protonvpn_login
	openvpn servers/protonvpn/japan1.ovpn
	;;
	"1.2")
	echo $(($(cat "uses/12")+1)) > uses/12
	protonvpn_login
	openvpn servers/protonvpn/japan2.ovpn
	;;
	"2.1"|"2")
	echo $(($(cat "uses/21")+1)) > uses/21
	protonvpn_login
	openvpn servers/protonvpn/us1.ovpn
	;;
	"2.2")
	echo $(($(cat "uses/22")+1)) > uses/22
	protonvpn_login
	openvpn servers/protonvpn/us2.ovpn
	;;
	"2.3")
	echo $(($(cat "uses/23")+1)) > uses/23
	vpnbook_login
	openvpn servers/vpnbook/us3.ovpn
	;;
	"2.4")
	echo $(($(cat "uses/24")+1)) > uses/24
	vpnbook_login
	openvpn servers/vpnbook/us4.ovpn
	;;
	"3.1"|"3")
	echo $(($(cat "uses/31")+1)) > uses/31
	protonvpn_login
	openvpn servers/protonvpn/netherlands1.ovpn
	;;
	"3.2")
	echo $(($(cat "uses/32")+1)) > uses/32
	protonvpn_login
	openvpn servers/protonvpn/netherlands2.ovpn
	;;
	"4.1"|"4")
	echo $(($(cat "uses/41")+1)) > uses/41
	vpnbook_login
	openvpn servers/vpnbook/romania1.ovpn
	;;
	"4.2")
	echo $(($(cat "uses/42")+1)) > uses/42
	vpnbook_login
	openvpn servers/vpnbook/romania2.ovpn
	;;
	"5.1"|"5")
	echo $(($(cat "uses/51")+1)) > uses/51
	vpnbook_login
	openvpn servers/vpnbook/canada1.ovpn
	;;
	"6.1"|"6")
	echo $(($(cat "uses/61")+1)) > uses/61
	vpnbook_login
	openvpn servers/vpnbook/germany1.ovpn
	;;
	"7.1"|"7")
	echo $(($(cat "uses/71")+1)) > uses/71
	vpnbook_login
	openvpn servers/vpnbook/france1.ovpn
	;;
	"216")
	echo
	echo -e "${wtrmrk}You found the Easter Egg!"
	cat "dat/yay"
	echo
	echo -n -e "${wcol}Press ENTER to continue..." && read null_input
	redir_loca
	;;
	*)
	echo -e "${rbold}Your choice was not recognized. Please try again."
	echo -n -e "${wcol}Press ENTER to continue..." && read null_input
	redir_loca
	;;
esac
}
testing
### END
